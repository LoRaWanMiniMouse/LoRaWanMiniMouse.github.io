<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MiniMouse Stack: C:/GITEXT/githubdoc/LoRaWanMiniMouse.github.io/MMstack/UserCode/main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="lora.bmp"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MiniMouse Stack
   &#160;<span id="projectnumber">V1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4479a50ac3338962579017839c6d11ac.html">GITEXT</a></li><li class="navelem"><a class="el" href="dir_313566ed96e2d68b7746be4483e9b217.html">githubdoc</a></li><li class="navelem"><a class="el" href="dir_a1fe12ccd40675146f9c8376113c041e.html">LoRaWanMiniMouse.github.io</a></li><li class="navelem"><a class="el" href="dir_502a2e6a450cda7c1e5931c413e42c70.html">MMstack</a></li><li class="navelem"><a class="el" href="dir_287984a24aa2b0df1572ba9f4b944a4c.html">UserCode</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;mbed.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_lora_mac_data_store_in_flash_8h_source.html">LoraMacDataStoreInFlash.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_lora_wan_process_8h_source.html">LoraWanProcess.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_define_8h_source.html">Define.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="utilities_8h_source.html">utilities.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_user_define_8h_source.html">UserDefine.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="appli_8h_source.html">appli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_s_x126x_8h_source.html">SX126x.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_api_mcu_8h_source.html">ApiMcu.h</a>&quot;</code><br />
</div>
<p><a href="main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af39987ed395cff959b6956b3452952be"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structs_back_up_flash.html">sBackUpFlash</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#af39987ed395cff959b6956b3452952be">BackUpFlash</a></td></tr>
<tr class="memdesc:af39987ed395cff959b6956b3452952be"><td class="mdescLeft">&#160;</td><td class="mdescRight">BackUpFlash The LoraWan structure parameters save into the flash memory for failsafe restauration.  <a href="#af39987ed395cff959b6956b3452952be">More...</a><br /></td></tr>
<tr class="separator:af39987ed395cff959b6956b3452952be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e7125d0f4c5b5efc1236698c02752ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_mcu_x_x.html">McuXX</a>&lt; <a class="el" href="class_mcu_s_t_m32_l4.html">McuSTM32L4</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a3e7125d0f4c5b5efc1236698c02752ef">mcu</a> (<a class="el" href="_user_define_8h.html#a3f5699acd29748e068ddd6d6c28b8fab">LORA_SPI_MOSI</a>, <a class="el" href="_user_define_8h.html#af8db8e4d626d327ad8a7b2bf4455209c">LORA_SPI_MISO</a>, <a class="el" href="_user_define_8h.html#a7d5bea89ac1696411e1f40209e7ebaa7">LORA_SPI_SCLK</a>)</td></tr>
<tr class="memdesc:a3e7125d0f4c5b5efc1236698c02752ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Radio Interrupt Pin declarations.  <a href="#a3e7125d0f4c5b5efc1236698c02752ef">More...</a><br /></td></tr>
<tr class="separator:a3e7125d0f4c5b5efc1236698c02752ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a095120399a6edc8ae3886936fc33eb20"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a095120399a6edc8ae3886936fc33eb20">LoRaMacNwkSKeyInit</a> [] = { 0x22, 0x33, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11}</td></tr>
<tr class="memdesc:a095120399a6edc8ae3886936fc33eb20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameters of the LoraWanKeys structure.  <a href="#a095120399a6edc8ae3886936fc33eb20">More...</a><br /></td></tr>
<tr class="separator:a095120399a6edc8ae3886936fc33eb20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa622c47d7e66633f4b919c1e7668f0f7"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aa622c47d7e66633f4b919c1e7668f0f7">LoRaMacAppSKeyInit</a> [] = { 0x11, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22}</td></tr>
<tr class="separator:aa622c47d7e66633f4b919c1e7668f0f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaec460fc9ebcf36ea2ecd5ad4826ec36"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#aaec460fc9ebcf36ea2ecd5ad4826ec36">LoRaMacAppKeyInit</a> [] = { 0xBB, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11}</td></tr>
<tr class="separator:aaec460fc9ebcf36ea2ecd5ad4826ec36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ed723ad16bfc8c263d17e23dde91bed"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a2ed723ad16bfc8c263d17e23dde91bed">AppEuiInit</a> [] = { 0x70, 0xb3, 0xd5, 0x7e, 0xf0, 0x00, 0x36, 0x12 }</td></tr>
<tr class="separator:a2ed723ad16bfc8c263d17e23dde91bed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41858b10db6a7676108c1193fd9efaba"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a41858b10db6a7676108c1193fd9efaba">DevEuiInit</a> [] = { 0x11, 0x22, 0x33, 0x44, 0x44, 0x33, 0x22, 0xbb }</td></tr>
<tr class="separator:a41858b10db6a7676108c1193fd9efaba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6103d2355d60728852bb0828c4bad37e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a6103d2355d60728852bb0828c4bad37e">LoRaDevAddrInit</a> = 0x26011918</td></tr>
<tr class="separator:a6103d2355d60728852bb0828c4bad37e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>RtcInit , WakeUpInit, LowPowerTimerLoRaInit() are Mcu dependant .</p>
<p>Lp&lt;LoraRegionsEU&gt;: A LoRaWan Object with Eu region's rules. </p><dl class="section remark"><dt>Remarks</dt><dd>The Current implementation support radio <a class="el" href="class_s_x1276.html">SX1276</a> and sx1261</dd></dl>
<p>Restore the LoraWan Context</p>
<p>For this example : send an un confirmed message on port 3 . The user payload is a ramp from 0 to 13 (14 bytes).</p>
<p>Configure a new DataRate Strategy</p>
<pre class="fragment">   This function manages the state of the MAC and performs all the computation intensive (crypto) tasks of the MAC.
   This function is called periodically by the user’s application whenever the state of the MAC is not idle.
   The function is not timing critical, can be called at any time and can be interrupted by any IRQ (including the user’s IRQ).
   The only requirement is that this function must be called at least once between the end of the transmission and the beginning of the RX1 slot.
   Therefore when the stack is active a call periodicity of roughly 300mSec is recommended.
</pre><p>Send a ¨Packet every 120 seconds in case of join Send a packet every AppTimeSleeping seconds in normal mode</p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00053">53</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2ed723ad16bfc8c263d17e23dde91bed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ed723ad16bfc8c263d17e23dde91bed">&#9670;&nbsp;</a></span>AppEuiInit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t AppEuiInit[] = { 0x70, 0xb3, 0xd5, 0x7e, 0xf0, 0x00, 0x36, 0x12 }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00049">49</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="af39987ed395cff959b6956b3452952be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af39987ed395cff959b6956b3452952be">&#9670;&nbsp;</a></span>BackUpFlash</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structs_back_up_flash.html">sBackUpFlash</a> BackUpFlash</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>BackUpFlash The LoraWan structure parameters save into the flash memory for failsafe restauration. </p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00033">33</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a41858b10db6a7676108c1193fd9efaba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41858b10db6a7676108c1193fd9efaba">&#9670;&nbsp;</a></span>DevEuiInit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t DevEuiInit[] = { 0x11, 0x22, 0x33, 0x44, 0x44, 0x33, 0x22, 0xbb }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00050">50</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a6103d2355d60728852bb0828c4bad37e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6103d2355d60728852bb0828c4bad37e">&#9670;&nbsp;</a></span>LoRaDevAddrInit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t LoRaDevAddrInit = 0x26011918</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00051">51</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="aaec460fc9ebcf36ea2ecd5ad4826ec36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaec460fc9ebcf36ea2ecd5ad4826ec36">&#9670;&nbsp;</a></span>LoRaMacAppKeyInit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t LoRaMacAppKeyInit[] = { 0xBB, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00048">48</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="aa622c47d7e66633f4b919c1e7668f0f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa622c47d7e66633f4b919c1e7668f0f7">&#9670;&nbsp;</a></span>LoRaMacAppSKeyInit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t LoRaMacAppSKeyInit[] = { 0x11, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22, 0x22}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00047">47</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a095120399a6edc8ae3886936fc33eb20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a095120399a6edc8ae3886936fc33eb20">&#9670;&nbsp;</a></span>LoRaMacNwkSKeyInit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t LoRaMacNwkSKeyInit[] = { 0x22, 0x33, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11, 0x11}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parameters of the LoraWanKeys structure. </p>
<dl class="section remark"><dt>Remarks</dt><dd>For APB Devices only NwkSkey, AppSKey and devaddr are mandatory </dd>
<dd>
For OTA Devices only DevEUI, AppEUI and AppKey are mandatory </dd></dl>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00046">46</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
<a id="a3e7125d0f4c5b5efc1236698c02752ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e7125d0f4c5b5efc1236698c02752ef">&#9670;&nbsp;</a></span>mcu</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_mcu_x_x.html">McuXX</a>&lt;<a class="el" href="class_mcu_s_t_m32_l4.html">McuSTM32L4</a>&gt; mcu(<a class="el" href="_user_define_8h.html#a3f5699acd29748e068ddd6d6c28b8fab">LORA_SPI_MOSI</a>, <a class="el" href="_user_define_8h.html#af8db8e4d626d327ad8a7b2bf4455209c">LORA_SPI_MISO</a>, <a class="el" href="_user_define_8h.html#a7d5bea89ac1696411e1f40209e7ebaa7">LORA_SPI_SCLK</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Radio Interrupt Pin declarations. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
